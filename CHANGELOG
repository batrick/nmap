# Nmap Changelog

-- Various internal code cleanups.

-- Added a whole bunch of OS fingerprints that people have submitted.

-- Added ACK scanning!  This scan technique (which van Houser and
   others have been bugging me to add for years :), is great for
   testing firewall rulesets.  It can NOT find open ports, but it can
   distinguish between filtered/unfilterd by sending an ACK packet to
   each port and waiting for a RST to come back.  Filtered ports will
   not send back a RST.  This scan type is activated with -sA .

-- Changed version number from 2.3BETA* to 2.30BETA* to appease
   various packaging systems that thought 2.3BETA was < 2.12 .

-- Nmap output to files now correctly flushes output after scanning
   for each host is finished.

-- Fixed compiler -L flags error found by  Ralf Hildebrandt <R.Hildebrandt@tu-bs.de>

-- Added --noninteractive option for when nmap is called from scripts
(where stuff like prompting users for info is unacceptable).  It does
not currently do anything (Nmap never prompts) and script writers
should probably wait until at least May '2000 so their scripts still
work with earlier versions of Nmap.

-- Updated to the latest config.guess and config.sub from Autoconf 2.13

-- Applied patch by Sven <s.carstens@gmx.de> which fixes a segmentation
   fault problem in Nmapfe colored mode as well as some output niceties.

-- Changed some C++ comments to C-style for portability (noticed by 
   "Sergei V. Rousakov" <sergei@cas.Vanderbilt.Edu> )

-- Added --resume option to continue a large network scan where you
   left off.  This is useful for recovering from errors (modem drops
   carrier, network outage, etc).  It also allows you to start and
   stop for policy reasons (like if a client only wants you to scan on
   weekends or at night) or if you want to run the scan on a different
   host.  Usage is 'nmap --resume logfile' where logfile can be either
   normal (-oN) or machine parseable (-oM) logfile from the scan that
   was aborted.  No other options can be given (the options in the
   logfile from the original scan will be used).  Nmap will start off
   with the host after the last one successfully scanned in the log
   file.

-- Added --append_output option which causes -oN/-oM/-oS to APPEND to
   the output file you specify rather than overwriting it.

** Version 2.3BETA14

-- Peter Kosinar <goober@gjh.sk> performed some cleanup of the output
   routines and as a bonus he added skript kiddie output mode!!!  Try
   it out by adding "-oS - " to your nmap command line.  Note that
   using '-' to represent stdout instead of a filename is something
   you can do with any of the output modes.

-- Ensured that Nmap always gives up on ident scan after the first
   port attempt finds it to be closed (problem noticed by Matt
   <matt@use.net>)

-- Changed strsep's in nmapfe to more portable strtok's (should
   especially help Nmapfe compiles on Solaris)

-- Changed permutation algorithm to make port order and host order
   shuffling more random.

-- Various minor changes and internal code cleanup.

-- Fixed integer overflow that was limiting the max --host_timeout value 
   to about 2,000,000 milliseconds (~1/2 hour).  The limit is now
   about 4,000,000,000 milliseconds (~1 month).  I really hope you don't 
   need more than that :).

** Version 2.3BETA13
-- I made Nmap smarter about detecting filtering during UDP, Xmas,
   NULL, and FIN scans.

-- Updated Nmapfe to 0.9.5 (+ a patch from NmapFE author Zach Smith)

-- Fixed a problem where NmapFE would fail to honor $PATH (Noticed 
   by K. Scott Rowe <kscott@nmt.edu>)

-- Added a couple ICMP unreachable messages Nmap was missing (found by
   Bifrost <bifrost@minions.com>).

-- Internal cleanup that improves the way some port lists are stored.

-- Added some more RPC numbers from <mmmorris@netscape.net>

-- Relaxed the dependency requirements of nmapfe rpm (now will accept
   any version of Nmap).

** Version 2.3BETA12
-- Added interactive mode which adds convenience for managing nmap
   sessions and also enhances privacy.  Get to it with --interactive
   and then type 'h' for help.

-- Added/modified many fingerprints including the latest 2.3.X Linux
   releases, the latest Win2000 builds, the Apple Airport Wireless
   device, and several dozen more.

-- Migrated to RPM .spec file sent in by Tim Powers
   <timp@redhat.com>.  That is the file they will be using to package
   Nmap with the power tools CD in the next Redhat release.  The most
   important changes are that Nmap (only the RPM version) now installs
   in /usr/* instead of /usr/local/* and the frontend is now
   dynamically linked with GTK and comes in a separate rpm.

-- The -i (input from list) option has been deprecated.  From now on
   you should use -iL <filename> to read from a list or -iR to have
   Nmap generate random IPs to scan.  This -iR option is new.

-- The -o and -m options have been deprecated.  From now on, you
   should use -oN for normal (human readable) output and -oM for
   machine parseable output.  At some point I might add -oH (HTML
   output) or -oSK (sKr|pt |<iDdi3 0uTPut).

-- Added --randomize_hosts option, which causes hosts be be scanned in
   non-sequential order.  This makes scans less conspicuous.  For
   efficiency reasons, the hosts are chopped into groups of 2048 and
   then each group is internally shuffled (the groups still go in
   order).

-- Rearranged the help ('nmap -h' or 'nmap' or 'nmap --help') screen
   to be shorter (37 -> 23 lines!) and include some of the new
   features of this release.  The man page was updated as well.

-- Fixed longstanding bug where nmap -sS mylocalnetwork/24 would not
   successfully scan the host running nmap.

-- Internal improvements to make scanning faster with -i (input list)
   or when you specify multiple machines on the command line.

-- Uses faster GCD algorithm and fixed several typos (sent in by Peter
   Kosinar).

-- Provide more information in machine/human readable output files
   (start time, end time, RPC program name, Nmap version number)

-- Killed the -A option (if you don't know what that is then you won't
   miss it.  In fact, even if you do know what it is you won't miss
   it.)

** Version 2.3BETA10

-- Added about 70 new OS fingerprints so that Nmap can detect more
   systems.  The most important new fingerprints are probably:
   * The new SP5+ NT boxes -- After all these years MS FINALLY made
     sequence prediction harder (on NT anyway).
   * Solaris 8 Pre-Release
   * Sega Dreamcast (Hack that!)
   * Latest Windows 2000 builds
   * OpenBSD 2.6

** Version 2.3BETA9

-- Applied patch by Mark Abene (Phiber Optik) to fix several type
   length issues so that it works on Linux/Alpha.

-- Applied patch by Matthieu Verbert <mve@zurich.ibm.com> to speed up OSScan

** Version 2.3Beta8
-- Added "firewall mode" timing optimizations which can decrease the
   ammount of time neccessary to SYN or connect scan some heavily
   filtered hosts.

-- Added min_rtt_timeout timing option (see man page for details)

-- Changed "TCP Ping" to use a random ACK value rather than 0 (an IDS
   called Snort was using this to detect Nmap TCP Pings).

-- Some changes for better Alpha/Linux support based on investigation
   by Bill Beers <wbeers@carolina.rr.com>

-- Applied changes for FDDI support by Tobias J. Nijweide <tobias@mesa.nl

-- Applied a socket binding patch from LaMont Jones <lamont@security.hp.com>
   which can be useful when using -S to specify one of multiple interfaces
   on a machine.

-- Made OS detection smart enough to first check scan results for a known
   closed port instead of immediately resorting to a random one.  This
   improves OS detection against some machines behind packet
   filters. (suggested by van Hauser) 

-- Applied a shortcut suggestion by Thomas Reinke which can lead to
   a tremendous speedup against some firewalled hosts.

-- Added some ports commonly used for RPC to nmap-services

-- Fixed a problem with the timing of an RPC scan (could come before
   the UDP scans they rely on)

-- Added a number of new ports to nmap-services

** Version 2.3Beta6 **

-- Added sophisticated timing controls to give the user much more
   control over Nmap's speed.  This allows you to make Nmap much more
   aggressive to scan hosts faster, or you can make Nmap more "polite"
   -- slower but less likely to wreak havoc on your Network.  You can
   even enforce large delays between sending packets to sneak under
   IDS thresholds and prevent detection.  See the new "Timing Options"
   section of the Nmap man page for more information on using this.

-- Applied Lamont Granquist's <lamontg@u.washington.edu> Window
   scan patch (I changed the name from ACK scan to Window scan since I
   may add another scan that uses ACK packets and I don't want them to
   be confused).  -sW activates this scan type.  It is mostly
   effective against BSD, AIX, Digital UNIX, and various older HP/UX,
   SunOS, and VAX. (See nmap-hackers mailing list archives for an
   extensive list).

-- Added various long options people expect to see like --version , 
   --help , --usage , etc.  Some of the new timing options are also
   long.  I had to add getopt_long C files since most non-Linux boxes
   don't support getopt_long in libc.

-- Human readable (-o) output changed to include the time/date of the
   scan.  Suggested by van Hauser.

** Version 2.3-Beta5 ***

-- Changed RPC output based on suggestions by David O'Brien
   <obrien@NUXI.com> and Lance Spitzner <lance@spitzner.net>.  I got
   rid of the "(Non-RPC)" unnecessary clutter which appeared after
   each non RPC port and the "(untested)" that appeard after each
   "filtered" port.

-- Added a ton of new OS fingerprints people submitted.  I had about
   400 in my inbox.  Of course, almost 100 of them were submissions for
   www.windows2000test.com :).

-- Changed the machine parseable output of RPC information to include
   the version information.  If we figured out the RPC info, it is now
   provided as "program-num*lowversion-highversion".  If we didn't get
   the number, but we think the port is RPC, the field simply contains
   "R".  If we believe the port is NOT RPC, then the field contains
   "N".  If the field is empty, we did not RPC scan the port.  Thanks
   to H D Moore <nlog@ings.com> for making me aware how much the
   earlier machine parseable RPC logging sucked :).

*** Version 2.3-Beta4 ***

-- Added direct (non-portmapper) RPC scanning to determine what RPC
   program is listening on a particular port.  This works for UDP and
   TCP ports and is currently implemented using sockets (which means
   you can't use decoys, but on the other hand you don't have to be
   root).  Thanks go to ga <ga@capyork.com> for writing sample code to
   demonstrate the technique.  The RPC services list included with
   nmap was compiled by Vik Bajaj <vbajaj@sas.upenn.edu> with help
   from various members of the nmap-hackers list.

-- Fixed a problem that could cause freezes when you
   scan machines on at least two different types of interfaces as part
   of the same command.

-- Identified and found workaround for Linux kernel bug which allows
   connect() to sometimes succeed inapropriately when scanning closed
   ports on localhost.

-- Fixed problems relating to people who specify the same port more
   than once on the command line.  While the right answer is "well,
   don't do that!", I decided to fix nmap to handle this gracefully.

-- Tweaked UDP scanning to be more effective against Solaris ICMP
   error limiting.

-- Fixed strtol() integer overflow problem found by Renaud 
   Deraison <deraison@cvs.nessus.org>

-- The HTML translation of the Man page at
   http://www.insecure.org/nmap/nmap_manpage.html should now be
   complete (man2html was dropping lines before).

-- Added a note in the man page that Nmap 2.0+ is believed to be
   COMPLETELY Y2K COMPLIANT!  I've been getting a lot of letters from
   laywers about that recently.  You should still be able to port scan on
   Jan 1st (well ... as long as you have electricity and gangs of looting
   thugs haven't stolen your computers :)

*** Version 2.2-Beta4 ***
-- Integrated nmapfe code from Zach Smith to allow
   the nmapfe output window to resize when you resize the nmapfe window.

-- Integrated patch sent in by Stefan Erben <stefan@erben.com> which
   allows nmap to recognize and ignore null interfaces.  If you were
   getting a bogus error like "eth0 not found in /proc/net/route" then
   this should solve your problem.

-- Applied patch from Alexander Savelyev <fano@ham.kiev.ua> which
   gives nmap the parameters necessary to support SLIP and PPP on BSDI
   systems.

-- Upgraded to a new version of shtool (1.2.3)

*** Version 2.2-Beta3 ***

-- Adopted Ralf S. Engelschall's excellent shtool script
   for simplifying the nmap makefile and making it more portable
-- Various other minor changes to nmapfe.

*** Version 2.2-Beta2 ***

-- Cleaned up build environment more, fixed up RPM and Makefile.in,
   eliminated the automake stuff.
-- Added nmapfe feature to show nmap command as you change options
-- Changed nmapfe to use a global MyWidgets struct rather than
   tons of global vars all over the place.
-- Made nmapfe much smarter about rejecting stupid option attempts.
   It now tries to correct things when you specify illegal options.
-- GTK+ 1.0 compatibility fixes
-- Integrated nmapfe changes from Zach

*** Version 2.2-BETA1 Changes ***

-- Integrated in nmapfe -- a cool front end wrottem by Zach Smith <matrxweb@hotmail.com>


*** Version 2.12 Changes ***

-- Changed the way tcp connect() scan determines the results of a
   connect() call.  Hopefully this will make nmap a little more
   portable.

-- Got rid of the security warning message for people who are missing
   /dev/random and /dev/urandom due to complaints about the warning.
   This only silences the warnings -- it still uses relatively weak
   random number generation under Solaris and other systems that lack
   this functionality.

-- Eliminated pow() calls on Linux boxes.  I think some sort of glibc
   bug was causing nmap to sigsegv in some cases inside of pow().
   Most people weren't affected, but those who were would almost
   always SIGSEGV with -O.

-- Fixed an rpm problem noted by Mark Smith <marks@senet.com.au>

*** Version 2.11 Changes ***

-- Many new fingerprints added.  I received more than 300 submissions
   between this release and the last one.

-- Fixed IRIX problems which prevented OS scanning from working on
   that platform.  The problem was researched and solution found by
   Lamont Granquist <lamontg@u.washington.edu>.  You can also thank
   him for porting nmap to almost every UNIX around.

-- Added support for '-m -' to redirect machine readable logs to
   stdout for shell pipelining, etc.  I also changed machine readable
   output to show service names now that we use a nmap specific
   services file rather than /etc/services.  These features were
   suggested by Dan Farmer.  You can also thank him for SATAN (the
   auditing tool).

-- Fixed a link-list bug that could cause hangs in UDP,FIN,NULL, and
   XMAS scans.  Also fixed a ptr problem that could cause SIGSEGV.
   These problem were discovered and tracked down by Ben Laurie
   <ben@algroup.co.uk>.  You can also thank him for Apache, OpenSSL,
   and Apache-SSL.

-- Fixed installation problem for people without a /usr/local/man/man1
   directory.  Found by Jeffrey Robertson <a-jeffro@microsoft.com>.
   I guess you can thank him for Win98 ;).

-- Several other little fixes to the installation script and minor
   scanner tweaks.

*** Version 2.10 Changes ***

-- Private test release 

*** Version 2.09 Changes ***

-- Private test release 

*** Version 2.08 Changes ***

-- Bugfix for problem that can cause nmap to appear to "freeze up" for long
   periods of time when run on some busy networks. (found by Lamont Granquist)

*** Version 2.07 Changes ***

-- Fixed a lockup on Solaris (and perhaps other proprietary UNIX
   systems) caused by a lack of /dev/random & /dev/urandom and a
   rand() that only returns values up to 65535.  Users of Free
   operating systems like Linux, FreeBSD, or OpenBSD probably
   shouldn't bother upgrading.

***Version 2.06 Changes***

-- Fixed compile problems on machines which lack snprintf() (found by Ken
   Williams <jkwilli2@unity.ncsu.edu>)
-- Added the squid proxy to nmap-services (suggested by Holger Heimann)
-- Fixed a problem where the new memory allocation system was handing out
   misaligned pointers.
-- Fixed another memory allocation bug which probably doesn't cause any
   real-life problems.
-- Made nmap look in more places for nmap-os-fingerprints

***Version 2.05 Changes***

-- Tons of new fingerprints.  The number has grown by more than 25%.
  In particular, Charles M. Hannum <root@ihack.net> fixed several
  problems with NetBSD that made it easy to fingerprint and he sent me
  a huge new batch of fingerprints for various NetBSD releases down to
  1.2.  Other people sent NetBSD fingerprints down to 1.0.  I finally
  got some early Linux fingerprints in (down to 1.09).

-- Nmap now comes with its own nmap-services which I created by
   merging the /etc/services from a bunch of OS' and then adding
   Netbus, Back Orifice, etc.

-- Random number generation now takes advantage of the /dev/urandom or
   /dev/random that most free operating systems offer.

-- Increased the maximum number of OS guesses nmap will make, told
   nmap never to give you two matches where the OS names are
   byte-to-byte equivalent.  Fixed nmap to differentiate between "no
   OS matches found" and "too many OS matches to list".

-- Fixed an information leak in the packet TTL values (found by 
   HD Moore <hdmoore@usa.net>)

-- Fixed the problem noted by Savva Uspensky about offsets used for
   various operating systems' PPP/SLIP headers.  Due to lack of
   responses regarding other operating systems, I have made
   assumptions about what works for BSDI, NetBSD, and SOLARIS.  If
   this version no longer works on your modem, please let me know (and
   tell me whether you are using SLIP/PPP and what OS you are
   running).

-- Machine parseable logs are now more machine parseable (I now use a
   tab to seperate test result fields rather than the more ambiguous
   spaces.  This may break a few things which rely on the old format.
   Sorry.  They should be easy to fix.

-- Added my nmap-fingerprintinting-article.txt to the distribution in
   the docs directory.

-- Added a CHANGELOG file to the distribution.

-- Fixed problem where nmap -sS <my_ethernet_or_ppp_ip_address> would
   not correctly scan localhost (due to the kernel rerouting the
   traffic through localhost).  Nmap should now detect and work around
   this behavior.

-- Applied patch sent to my by Bill Fenner <fenner@parc.xerox.com>
   which fixes various SunOS compatibility problems.

-- Changed the makefile 'all' target to use install-sh rather than 
   mkdir -p (doesn't work on some systems)

-- Documentation updated and clarified slightly.







